<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: like.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: like.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Ajout des listeners sur chaque petit coeur visibles sous les photos de la gallerie
 */
function setLikeListener(){
  let likeArray = document.querySelectorAll(".gallery_frame_element_description_heart");
  likeArray.forEach(el => el.addEventListener("click", addLike));
}

/**
 * Incrémenté ou décrémenté le like sur la photo ciblé, ainsi que dans l'encart en bas de page affichant le total de like. A noter : Le total n'est pas recalculé selon les likes de chaque photo.
 * @param {event} e 
 */
function addLike(e){
  let node = e.target.parentNode.querySelector("p");
  /**
   * récupéré le nombre de like au format {string} et le convertir en {number}
   */
  let heart = parseInt(document.querySelector(".heartPrice_heart").textContent, 10);
  let mediaId = node.parentNode.parentNode.dataset.id;
  let media = virtualJSON.media.find(el => el.id == mediaId);
  /**
   * Si le like n'est pas actif, on incrémente le nombre puis on défini un dataset "enable" a true
   */
  if(!node.dataset.enable){
    node.textContent = parseInt(node.textContent, 10) +1;
    document.querySelector(".heartPrice_heart").textContent = heart+1+" ♥";
    node.dataset.enable = 1 ;
    media.likes += 1;
  }
  /**
   * Si le like est actif, on décrémente. On défni le dataset "enable" a false
   */
  else if(node.dataset.enable){
    node.textContent = parseInt(node.textContent, 10) -1;
    document.querySelector(".heartPrice_heart").textContent = heart-1+" ♥";
    node.dataset.enable = "" ;
    media.likes -= 1;
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Artiste.html">Artiste</a></li><li><a href="Fabric.html">Fabric</a></li><li><a href="Media.html">Media</a></li><li><a href="modalTabulator.html">modalTabulator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addLike">addLike</a></li><li><a href="global.html#addOrderListListener">addOrderListListener</a></li><li><a href="global.html#clickLeftLightBox">clickLeftLightBox</a></li><li><a href="global.html#clickListenerOrderList">clickListenerOrderList</a></li><li><a href="global.html#clickRightLightBox">clickRightLightBox</a></li><li><a href="global.html#closeEventListener">closeEventListener</a></li><li><a href="global.html#closeModalListener">closeModalListener</a></li><li><a href="global.html#fillContact">fillContact</a></li><li><a href="global.html#findIndex">findIndex</a></li><li><a href="global.html#frameClickListener">frameClickListener</a></li><li><a href="global.html#getUrlParam">getUrlParam</a></li><li><a href="global.html#keyListener">keyListener</a></li><li><a href="global.html#makeListTag">makeListTag</a></li><li><a href="global.html#modalKeyListener">modalKeyListener</a></li><li><a href="global.html#orderButton">orderButton</a></li><li><a href="global.html#orderBy">orderBy</a></li><li><a href="global.html#orderByDate">orderByDate</a></li><li><a href="global.html#orderByPopularity">orderByPopularity</a></li><li><a href="global.html#orderByTitle">orderByTitle</a></li><li><a href="global.html#removeOrderListListener">removeOrderListListener</a></li><li><a href="global.html#selectArtiste">selectArtiste</a></li><li><a href="global.html#selectMedia">selectMedia</a></li><li><a href="global.html#setFocus">setFocus</a></li><li><a href="global.html#setImgToPrint">setImgToPrint</a></li><li><a href="global.html#setLikeBox">setLikeBox</a></li><li><a href="global.html#setLikeListener">setLikeListener</a></li><li><a href="global.html#setOrder">setOrder</a></li><li><a href="global.html#updatePriceBox">updatePriceBox</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sat Apr 03 2021 21:03:43 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
